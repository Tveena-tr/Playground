<!DOCTYPE html>
<html>
<head>
	<title> JSON and AJAX </title>
	
	<script>
		function getWelcome(){
				
			var ajaxRequest = new XMLHttpRequest();
			ajaxRequest.onreadystatechange = function(){
			
				if(ajaxRequest.readyState == 4){
					//the request is completed, now check its status
					if(ajaxRequest.status == 200){
						//turn JSON into object
						var jsonObj = JSON.parse(ajaxRequest.responseText);
						
						//get random object from array
						var randomMessagesArray = jsonObj.hits;
						var randomIndex = Math.floor(Math.random()*randomMessagesArray.length);
						var messageObj = randomMessagesArray[randomIndex];
						
						//use that object to set content and color
						document.getElementById("welcome").innerHTML = messageObj.type;
						document.getElementById("icon").src = messageObj.previewURL;
                        document.getElementById("likes").innerHTML = messageObj.likes;
						
					}
					else{
						console.log("Status error: " + ajaxRequest.status);
					}
				}
				else{
					console.log("Ignored readyState: " + ajaxRequest.readyState);
				}
			
			
			}
			ajaxRequest.open('GET', 'https://pixabay.com/api/?key=5303976-fd6581ad4ac165d1b75cc15b3&q=movie&image_type=photo&pretty=true');
			ajaxRequest.send();
		}
	
	</script>	
</head>
<body onload="getWelcome()">
	<div id="welcome" style="margin-top: 30px;margin-left: 30px;"></div>
    <img src=""alt="image"id="icon" style="margin-left: 30px;margin-top: 10px;width: 20%;height: 20%;">
    <div id = "likes"style="margin-left: 30px;margin-top:10px"></div>
</body>
</html>